# コンテキストエンジニアリングテンプレート

AIコーディングアシスタントがエンドツーエンドで仕事を完了するために必要な情報を持てるよう、コンテキストをエンジニアリングする分野であるコンテキストエンジニアリングを始めるための包括的なテンプレート。

> **コンテキストエンジニアリングはプロンプトエンジニアリングの10倍、バイブコーディングの100倍優れています。**

## 🚀 クイックスタート

```bash
# 1. このテンプレートをクローン
git clone https://github.com/hossiiii/context-engineering.git
cd context-engineering

# 2. プロジェクトルールを設定（オプション - テンプレート提供済み）
# CLAUDE.mdを編集してプロジェクト固有のガイドラインを追加

# 3. 例を追加（強く推奨）
# examples/フォルダに関連するコード例を配置

# 4. 初期機能要求を作成
# INITIAL.mdを編集して機能要件を記述

# 5. 包括的なPRP（Product Requirements Prompt）を生成
# Claude Codeで実行：
/generate-prp INITIAL.md

# 6. PRPを実行して機能を実装
# Claude Codeで実行：
/execute-prp PRPs/your-feature-name.md
```

## 📚 目次

- [コンテキストエンジニアリングとは？](#コンテキストエンジニアリングとは)
- [テンプレート構造](#テンプレート構造)
- [ステップバイステップガイド](#ステップバイステップガイド)
- [効果的なINITIAL.mdファイルの書き方](#効果的なinitialmdファイルの書き方)
- [PRPワークフロー](#prpワークフロー)
- [例の効果的な使用](#例の効果的な使用)
- [ベストプラクティス](#ベストプラクティス)

## コンテキストエンジニアリングとは？

コンテキストエンジニアリングは、従来のプロンプトエンジニアリングからのパラダイムシフトを表します：

### プロンプトエンジニアリング vs コンテキストエンジニアリング

**プロンプトエンジニアリング：**
- 巧妙な言い回しや特定のフレーズに焦点
- タスクの表現方法に限定
- 付箋紙を渡すようなもの

**コンテキストエンジニアリング：**
- 包括的なコンテキストを提供するための完全なシステム
- ドキュメント、例、ルール、パターン、検証を含む
- すべての詳細を含む完全な脚本を書くようなもの

### コンテキストエンジニアリングが重要な理由

1. **AI失敗の削減**：ほとんどのエージェント失敗はモデル失敗ではなく、コンテキスト失敗
2. **一貫性の確保**：AIがプロジェクトのパターンと規約に従う
3. **複雑な機能の実現**：適切なコンテキストで、AIが複数ステップの実装を処理可能
4. **自己修正**：検証ループにより、AIが自身の間違いを修正可能

## テンプレート構造

```
context-engineering-intro/
├── .claude/
│   ├── commands/
│   │   ├── generate-prp.md    # 包括的なPRPを生成
│   │   └── execute-prp.md     # PRPを実行して機能を実装
│   └── settings.local.json    # Claude Code権限
├── PRPs/
│   ├── templates/
│   │   └── prp_base.md       # PRPのベーステンプレート
│   └── EXAMPLE_multi_agent_prp.md  # 完全なPRPの例
├── examples/                  # コード例（重要！）
├── CLAUDE.md                 # AIアシスタント用グローバルルール
├── INITIAL.md               # 機能要求用テンプレート
├── INITIAL_EXAMPLE.md       # 機能要求の例
└── README.md                # このファイル
```

このテンプレートは、コンテキストエンジニアリングにおけるRAGとツールに焦点を当てていません。もうすぐそれについてもっとたくさん用意する予定だからです。;)

## ステップバイステップガイド

### 1. グローバルルールの設定（CLAUDE.md）

`CLAUDE.md`ファイルには、AIアシスタントがすべての会話で従うプロジェクト全体のルールが含まれています。テンプレートには以下が含まれます：

- **プロジェクト認識**：計画文書の読み取り、タスクの確認
- **コード構造**：ファイルサイズ制限、モジュール構成
- **テスト要件**：ユニットテストパターン、カバレッジ期待値
- **スタイル規約**：言語の好み、フォーマットルール
- **ドキュメント標準**：docstring形式、コメント慣行

**提供されたテンプレートをそのまま使用することも、プロジェクト用にカスタマイズすることも可能です。**

### 2. 初期機能要求の作成

`INITIAL.md`を編集して、構築したいものを説明します：

```markdown
## 機能:
[構築したいものを説明 - 機能と要件について具体的に]

## 例:
[examples/フォルダ内の例ファイルをリストし、使用方法を説明]

## ドキュメント:
[関連するドキュメント、API、MCPサーバーリソースへのリンクを含める]

## その他の考慮事項:
[注意点、特定の要件、AIアシスタントがよく見落とすことについて言及]
```

**完全な例については`INITIAL_EXAMPLE.md`を参照してください。**

### 3. PRPの生成

PRP（Product Requirements Prompts）は、以下を含む包括的な実装ブループリントです：

- 完全なコンテキストとドキュメント
- 検証付きの実装ステップ
- エラーハンドリングパターン
- テスト要件

これらはPRD（Product Requirements Documents）に似ていますが、AIコーディングアシスタントに指示するためにより具体的に作られています。

Claude Codeで実行：
```bash
/generate-prp INITIAL.md
```

**注意：** スラッシュコマンドは`.claude/commands/`で定義されたカスタムコマンドです。実装を確認できます：
- `.claude/commands/generate-prp.md` - PRPの調査と作成方法
- `.claude/commands/execute-prp.md` - PRPからの機能実装方法

これらのコマンドの`$ARGUMENTS`変数は、コマンド名の後に渡すもの（例：`INITIAL.md`や`PRPs/your-feature.md`）を受け取ります。

このコマンドは以下を行います：
1. 機能要求を読み取り
2. パターンのためにコードベースを調査
3. 関連ドキュメントを検索
4. `PRPs/your-feature-name.md`に包括的なPRPを作成

### 4. PRPの実行

生成後、PRPを実行して機能を実装します：

```bash
/execute-prp PRPs/your-feature-name.md
```

AIコーディングアシスタントは以下を行います：
1. PRPからすべてのコンテキストを読み取り
2. 詳細な実装計画を作成
3. 検証付きで各ステップを実行
4. テストを実行し、問題を修正
5. すべての成功基準が満たされることを確認

## 効果的なINITIAL.mdファイルの書き方

### 主要セクションの説明

**機能**：具体的で包括的に
- ❌ "Webスクレイパーを構築"
- ✅ "BeautifulSoupを使用してECサイトから商品データを抽出し、レート制限を処理し、結果をPostgreSQLに保存する非同期Webスクレイパーを構築"

**例**：examples/フォルダを活用
- `examples/`に関連するコードパターンを配置
- 特定のファイルと従うべきパターンを参照
- どの側面を模倣すべきかを説明

**ドキュメント**：すべての関連リソースを含める
- APIドキュメントURL
- ライブラリガイド
- MCPサーバードキュメント
- データベーススキーマ

**その他の考慮事項**：重要な詳細をキャプチャ
- 認証要件
- レート制限やクォータ
- よくある落とし穴
- パフォーマンス要件

## PRPワークフロー

### /generate-prpの動作方法

コマンドは以下のプロセスに従います：

1. **調査フェーズ**
   - パターンのためにコードベースを分析
   - 類似の実装を検索
   - 従うべき規約を特定

2. **ドキュメント収集**
   - 関連するAPIドキュメントを取得
   - ライブラリドキュメントを含める
   - 注意点と癖を追加

3. **ブループリント作成**
   - ステップバイステップの実装計画を作成
   - 検証ゲートを含める
   - テスト要件を追加

4. **品質チェック**
   - 信頼度レベルをスコア化（1-10）
   - すべてのコンテキストが含まれることを確認

### /execute-prpの動作方法

1. **コンテキスト読み込み**：PRP全体を読み取り
2. **計画**：TodoWriteを使用して詳細なタスクリストを作成
3. **実行**：各コンポーネントを実装
4. **検証**：テストとリンティングを実行
5. **反復**：発見された問題を修正
6. **完了**：すべての要件が満たされることを確認

生成されるものの完全な例については、`PRPs/EXAMPLE_multi_agent_prp.md`を参照してください。

## 例の効果的な使用

`examples/`フォルダは成功のために**重要**です。AIコーディングアシスタントは、従うべきパターンを見ることができるとはるかに良いパフォーマンスを発揮します。

### 例に含めるべきもの

1. **コード構造パターン**
   - モジュールの構成方法
   - インポート規約
   - クラス/関数パターン

2. **テストパターン**
   - テストファイル構造
   - モックアプローチ
   - アサーションスタイル

3. **統合パターン**
   - APIクライアント実装
   - データベース接続
   - 認証フロー

4. **CLIパターン**
   - 引数解析
   - 出力フォーマット
   - エラーハンドリング

### 例の構造

```
examples/
├── README.md           # 各例が何を示すかを説明
├── cli.py             # CLI実装パターン
├── agent/             # エージェントアーキテクチャパターン
│   ├── agent.py      # エージェント作成パターン
│   ├── tools.py      # ツール実装パターン
│   └── providers.py  # マルチプロバイダーパターン
└── tests/            # テストパターン
    ├── test_agent.py # ユニットテストパターン
    └── conftest.py   # Pytest設定
```

## ベストプラクティス

### 1. INITIAL.mdで明示的に
- AIがあなたの好みを知っていると仮定しない
- 具体的な要件と制約を含める
- 例を自由に参照

### 2. 包括的な例を提供
- より多くの例 = より良い実装
- すべきこととすべきでないことの両方を示す
- エラーハンドリングパターンを含める

### 3. 検証ゲートを使用
- PRPには合格すべきテストコマンドが含まれる
- AIはすべての検証が成功するまで反復
- これにより初回で動作するコードを確保

### 4. ドキュメントを活用
- 公式APIドキュメントを含める
- MCPサーバーリソースを追加
- 特定のドキュメントセクションを参照

### 5. CLAUDE.mdをカスタマイズ
- 規約を追加
- プロジェクト固有のルールを含める
- コーディング標準を定義

## リソース

- [Claude Codeドキュメント](https://docs.anthropic.com/en/docs/claude-code)
- [コンテキストエンジニアリングベストプラクティス](https://www.philschmid.de/context-engineering)